<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>Linux计划任务（1） | 安全小白团</title><meta name="author" content="安全小白团"><meta name="copyright" content="安全小白团"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="noob-sec安全小白团,小白学习基地,教你渗透测试如何从入门到放弃。">
<meta property="og:type" content="article">
<meta property="og:title" content="Linux计划任务（1）">
<meta property="og:url" content="https://aqxbt.github.io/Linux%E8%AE%A1%E5%88%92%E4%BB%BB%E5%8A%A1-1/index.html">
<meta property="og:site_name" content="安全小白团">
<meta property="og:description" content="noob-sec安全小白团,小白学习基地,教你渗透测试如何从入门到放弃。">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://aqxbt.github.io/img/default_cover.jpg">
<meta property="article:published_time" content="2020-08-21T01:17:10.000Z">
<meta property="article:modified_time" content="2020-08-21T01:31:16.246Z">
<meta property="article:author" content="安全小白团">
<meta property="article:tag" content="计划任务">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://aqxbt.github.io/img/default_cover.jpg"><script type="application/ld+json">{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "Linux计划任务（1）",
  "url": "https://aqxbt.github.io/Linux%E8%AE%A1%E5%88%92%E4%BB%BB%E5%8A%A1-1/",
  "image": "https://aqxbt.github.io/img/default_cover.jpg",
  "datePublished": "2020-08-21T01:17:10.000Z",
  "dateModified": "2020-08-21T01:31:16.246Z",
  "author": [
    {
      "@type": "Person",
      "name": "安全小白团",
      "url": "https://aqxbt.github.io/"
    }
  ]
}</script><link rel="shortcut icon" href="/img/logo.png"><link rel="canonical" href="https://aqxbt.github.io/Linux%E8%AE%A1%E5%88%92%E4%BB%BB%E5%8A%A1-1/index.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><meta name="google-site-verification" content="JKG8-pUVAOSCViijEForpmpMy1zRFztsxeiffYayqZg"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox/fancybox.min.css" media="print" onload="this.media='all'"><script>
    (() => {
      
    const saveToLocal = {
      set: (key, value, ttl) => {
        if (!ttl) return
        const expiry = Date.now() + ttl * 86400000
        localStorage.setItem(key, JSON.stringify({ value, expiry }))
      },
      get: key => {
        const itemStr = localStorage.getItem(key)
        if (!itemStr) return undefined
        const { value, expiry } = JSON.parse(itemStr)
        if (Date.now() > expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return value
      }
    }

    window.btf = {
      saveToLocal,
      getScript: (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        Object.entries(attr).forEach(([key, val]) => script.setAttribute(key, val))
        script.onload = script.onreadystatechange = () => {
          if (!script.readyState || /loaded|complete/.test(script.readyState)) resolve()
        }
        script.onerror = reject
        document.head.appendChild(script)
      }),
      getCSS: (url, id) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onload = link.onreadystatechange = () => {
          if (!link.readyState || /loaded|complete/.test(link.readyState)) resolve()
        }
        link.onerror = reject
        document.head.appendChild(link)
      }),
      addGlobalFn: (key, fn, name = false, parent = window) => {
        if (!false && key.startsWith('pjax')) return
        const globalFn = parent.globalFn || {}
        globalFn[key] = globalFn[key] || {}
        globalFn[key][name || Object.keys(globalFn[key]).length] = fn
        parent.globalFn = globalFn
      }
    }
  
      
      const activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      const activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }

      btf.activateDarkMode = activateDarkMode
      btf.activateLightMode = activateLightMode

      const theme = saveToLocal.get('theme')
    
          theme === 'dark' ? activateDarkMode() : theme === 'light' ? activateLightMode() : null
        
      
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        document.documentElement.classList.toggle('hide-aside', asideStatus === 'hide')
      }
    
      
    const detectApple = () => {
      if (/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)) {
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
  
    })()
  </script><script async="async" src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><script>(adsbygoogle = window.adsbygoogle || []).push({
  google_ad_client: 'ca-pub-6744915718473679',
  enable_page_level_ads: 'true'
});</script><script>const GLOBAL_CONFIG = {
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  translate: {"defaultEncoding":2,"translateDelay":0,"msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"简"},
  highlight: {"plugin":"highlight.js","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false,"highlightFullpage":false,"highlightMacStyle":false},
  copy: {
    success: '复制成功',
    error: '复制失败',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  dateSuffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: undefined,
  infinitegrid: {
    js: 'https://cdn.jsdelivr.net/npm/@egjs/infinitegrid/dist/infinitegrid.min.js',
    buttonText: '加载更多'
  },
  isPhotoFigcaption: false,
  islazyloadPlugin: false,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: false,
  },
  autoDarkmode: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'Linux计划任务（1）',
  isHighlightShrink: false,
  isToc: true,
  pageType: 'post'
}</script><meta name="generator" content="Hexo 7.3.0"></head><body><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img text-center"><img src="/img/logo.png" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="site-data text-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">25</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">8</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">9</div></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 时间轴</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/gallery/"><i class="fa-fw fas fa-images"></i><span> 图库</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友链</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url(/img/default_cover.jpg);"><nav id="nav"><span id="blog-info"><a class="nav-site-title" href="/"><img class="site-icon" src="/img/logo.png" alt="Logo"><span class="site-name">安全小白团</span></a><a class="nav-page-title" href="/"><span class="site-name">Linux计划任务（1）</span></a></span><div id="menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 时间轴</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/gallery/"><i class="fa-fw fas fa-images"></i><span> 图库</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友链</span></a></div></div><div id="toggle-menu"><span class="site-page"><i class="fas fa-bars fa-fw"></i></span></div></div></nav><div id="post-info"><h1 class="post-title">Linux计划任务（1）</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2020-08-21T01:17:10.000Z" title="发表于 2020-08-21 09:17:10">2020-08-21</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2020-08-21T01:31:16.246Z" title="更新于 2020-08-21 09:31:16">2020-08-21</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/Linux/">Linux</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">总字数:</span><span class="word-count">2.7k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">阅读时长:</span><span>8分钟</span></span><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title=""><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">浏览量:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="container post-content" id="article-container"><h1 id="01-何为计划任务"><a href="#01-何为计划任务" class="headerlink" title="01 何为计划任务"></a>01 何为计划任务</h1><p>&emsp;&emsp;计划任务，顾名思义：计划在未来某个时间点要执行的任务，也可称为定时任务。有一次性的计划任务，也有周期性的计划任务。</p>
<p>&emsp;&emsp;一次性的计划任务就相当于待办，如今天下午三点开会，那么它只会在今天下午三点提醒一次；周期性的计划任务就和我们手机闹钟一样，如设置工作日7点整的闹钟，那么每个工作日7点整闹钟都会准时响。</p>
<p>&emsp;&emsp;但我们平常说的计划任务大多是指周期性的计划任务，用来执行那些需要重复执行的命令和工作，如定时重启、打包、清理日志等等，大大满足了日常运维需求。</p>
<p>&emsp;&emsp;在Linux中，一次性的计划任务由at和batch命令完成；而周期性的计划任务则涉及到两个服务，分别是crond和anacron。今天我们要讲的是crond服务，对应的命令是crontab命令。</p>
<p>&emsp;&emsp;crond 服务是 Linux 下用来周期地执行某种任务或等待处理某些事件的一个守护进程，和 Windows 中的计划任务有些类似。在安装完操作系统后，默认会安装 crond 服务工具，且 crond 服务默认就是自启动的。crond 服务每分钟会定期检查是否有要执行的任务，如果有，则会自动执行该任务。</p>
<h1 id="02-crond配置文件"><a href="#02-crond配置文件" class="headerlink" title="02 crond配置文件"></a>02 crond配置文件</h1><p>&emsp;&emsp;Linux下的任务调度分为两类，系统任务调度和用户任务调度，其对应的配置文件和目录也各不相同。</p>
<h2 id="系统任务调度"><a href="#系统任务调度" class="headerlink" title="系统任务调度"></a>系统任务调度</h2><p>&emsp;&emsp;系统任务调度，系统周期性要执行的动作，配置文件为&#x2F;etc&#x2F;crontab，该配置为全局性的。</p>
<div align="center">	<img src="/Linux%E8%AE%A1%E5%88%92%E4%BB%BB%E5%8A%A1-1/1.jpg" class=""></div>

<p>&emsp;&emsp;可以看到，该配置文件已经在注释中告诉我们，这个配置文件是系统层面的crontab，与其他crontab不同（即用户任务调度），在编辑此文件和&#x2F;etc&#x2F;cron.d&#x2F;目录中的文件时，不必运行crontab命令。这些文件还额外具有一个用户名字段，但其他crontab都没有。</p>
<p>&emsp;&emsp;接着就是一些环境变量的设置。SHELL变量指定使用哪种shell，PATH变量指定系统执行命令的路径。MAILTO变量指定crond的任务执行信息将通过邮件发给哪个用户。HOME变量指定在执行命令或者脚本时使用的主目录。</p>
<p>&emsp;&emsp;系统计划任务的语法比较简单，由三部分组成。前面五个星号”*”表示时间：分时日月周；接着就是用户名：以什么身份执行，因为它是全局性的，所以必须指明身份；最后就是要执行的命令command。</p>
<p>&emsp;&emsp;在上图中，”run-parts”命令用来执行指定目录中的可执行脚本，这里引生出了四个目录，存放需要定期运行的脚本：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">/etc/cron.hourly/：每小时执行的脚本</span><br><span class="line">/etc/cron.daily/：每日执行的脚本</span><br><span class="line">/etc/cron.weekly/：每周执行的脚本</span><br><span class="line">/etc/cron.monthly/：每月执行的脚本</span><br></pre></td></tr></table></figure>
<p>&emsp;&emsp;我们以&#x2F;etc&#x2F;cron.daily&#x2F;目录为例，该目录下存放的是每日运行的可执行脚本，其内容就是要执行的命令。（具备执行权限）</p>
<div align="center">	<img src="/Linux%E8%AE%A1%E5%88%92%E4%BB%BB%E5%8A%A1-1/2.jpg" class=""></div>

<p>&emsp;&emsp;另外除了&#x2F;etc&#x2F;crontab配置文件，我们还可以在&#x2F;etc&#x2F;cron.d&#x2F;目录中存放系统层面的crontab文件。（不具备执行权限，注意和上面四个目录中的文件区分）</p>
<div align="center">	<img src="/Linux%E8%AE%A1%E5%88%92%E4%BB%BB%E5%8A%A1-1/3.jpg" class=""></div>

<p>&emsp;&emsp;两者的语法一致。我们通常不会去修改&#x2F;etc&#x2F;crontab文件，而是去操作&#x2F;etc&#x2F;cron.d&#x2F;目录下的crontab文件。该目录下的计划任务，相对”run-parts”命令涉及到的四个目录中的计划任务，有更自由的调度。</p>
<h2 id="用户任务调度"><a href="#用户任务调度" class="headerlink" title="用户任务调度"></a>用户任务调度</h2><p>&emsp;&emsp;用户任务调度，用户自定义的周期性动作，配置文件存放在&#x2F;var&#x2F;spool&#x2F;cron&#x2F;目录（或子目录&#x2F;var&#x2F;spool&#x2F;cron&#x2F;crontabs&#x2F;），文件名与用户名一致。</p>
<p>&emsp;&emsp;虽然都是crontab文件，但不能直接对其进行编辑，而是通过运行crontab命令对其进行编辑。</p>
<div align="center">	<img src="/Linux%E8%AE%A1%E5%88%92%E4%BB%BB%E5%8A%A1-1/4.jpg" class=""></div>

<p>&emsp;&emsp;这里提示没有用户自定义的计划任务，在下面的章节，我们会使用crontab命令来创建用户的crontab，同时掌握其语法。</p>
<h2 id="其他文件"><a href="#其他文件" class="headerlink" title="其他文件"></a>其他文件</h2><p>&emsp;&emsp;除了以上两种，crond服务还涉及以下目录和文件。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">/etc/cron.deny：黑名单。如果该文件存在，则其中的用户不允许使用crontab命令</span><br><span class="line">/etc/cron.allow：白名单。如果该文件存在，则只有其中的用户允许使用crontab命令</span><br><span class="line">如果两个文件都不存在，则只有超级用户允许使用</span><br></pre></td></tr></table></figure>

<p>&emsp;&emsp;语法很简单，每行一个用户名即可。</p>
<h1 id="03-crontab命令使用"><a href="#03-crontab命令使用" class="headerlink" title="03 crontab命令使用"></a>03 crontab命令使用</h1><div align="center">	<img src="/Linux%E8%AE%A1%E5%88%92%E4%BB%BB%E5%8A%A1-1/5.jpg" class=""></div>

<p>&emsp;&emsp;crontab命令用于维护每个用户的crontab文件，它的使用比较简单，如下是各选项的用法，我们熟练使用前面四个选项即可。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">crontab -e：编辑该用户的crontab，指定crontab不存在时则新建</span><br><span class="line">crontab -l：列出该用户的crontab</span><br><span class="line">crontab -r：删除该用户的crontab</span><br><span class="line">crontab -u：指定要对哪个用户的crontab进行操作</span><br><span class="line">crontab -i：删除crontab之前弹出对话框</span><br></pre></td></tr></table></figure>

<p>&emsp;&emsp;首先是”-u”选项，在不添加该选项时，默认是对当前用户的计划任务进行操作。如下图：当前用户为root，直接使用”-l”选项，提示root没有crontab；添加”-u”选项，则列出指定用户kali的计划任务。（需要注意的是，只有管理员权限才能使用”-u”选项，其他用户使用需要sudo）</p>
<div align="center">	<img src="/Linux%E8%AE%A1%E5%88%92%E4%BB%BB%E5%8A%A1-1/6.jpg" class=""></div>

<p>&emsp;&emsp;由于用户kali也没有计划任务，所以同样提示没有kali的crontab。这里我们需要使用”-e”选项，为用户kali新建计划任务。</p>
<p>&emsp;&emsp;在新建计划任务之前，我们需要详细了解用户crontab文件的语法。用户crontab语法和系统crontab语法差不多，只是少了一个用户名字段而已。command部分没啥好讲的，我们重点讲时间的设置。</p>
<div align="center">	<img src="/Linux%E8%AE%A1%E5%88%92%E4%BB%BB%E5%8A%A1-1/7.jpg" class=""></div>

<p>&emsp;&emsp;第五个时间字段，也就是星期字段，数字0和7均代表星期天，还可以用星期的英文来表示星期几。另外，五个时间字段中除了可以使用数字，还可以使用如下几个特殊字符。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">星号（*）：代表取值范围内的值（任意/每）。</span><br><span class="line">逗号（,）：一个列表。</span><br><span class="line">中杠（-）：一个范围。</span><br><span class="line">正斜线（/）：间隔频率。</span><br></pre></td></tr></table></figure>

<p>&emsp;&emsp;下面我们举例来理解这几个特殊字符的使用场景。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">每分钟执行一次命令</span><br><span class="line">* * * * * <span class="built_in">command</span>    （*表示任意时间，每；最小单位为每分钟）</span><br><span class="line"></span><br><span class="line">每天的2点整执行一次命令</span><br><span class="line">0 2 * * * <span class="built_in">command</span></span><br><span class="line"></span><br><span class="line">每个月的1号的2点整执行一次命令</span><br><span class="line">0 2 1 * * <span class="built_in">command</span></span><br><span class="line"></span><br><span class="line">每2分钟执行一次命令</span><br><span class="line">*/2 * * * * <span class="built_in">command</span>    （/表示时间间隔，每num执行一次）</span><br><span class="line"></span><br><span class="line">每小时的第2和第8分钟时执行一次命令</span><br><span class="line">2,8 * * * * <span class="built_in">command</span>    （,表示列表，在num1,num2,...的时候执行一次）</span><br><span class="line"></span><br><span class="line">每天2点到8点之间，每分钟执行一次命令</span><br><span class="line">* 2-8 * * * <span class="built_in">command</span>    （-表示范围，在num1到num2之间的某种条件下执行一次）</span><br><span class="line"></span><br><span class="line">每个月的、5和6号的、3到4点之间，每2分钟执行一次命令</span><br><span class="line">*/2 3-4 5,6 * * <span class="built_in">command</span>    （组合使用）  </span><br></pre></td></tr></table></figure>

<p>&emsp;&emsp;特殊字符可以单独使用，也可以组合使用，篇幅关系，就不一一列举，大家学会举一反三。五个字段都是对时间进行操作，只是取值范围和单位不一样而已。</p>
<p>&emsp;&emsp;介绍了时间字段的语法，接下来我们使用”-e”选项来为用户新建crontab。</p>
<p>&emsp;&emsp;第一次操作时，系统会要求我们选择编辑器，选择自己熟练的编辑器即可；选择之后会进入到crontab文件编辑的界面，我们在文件中按照语法添加计划任务，保存退出即可。（这里我没有放截图，大家敲下命令就知道了）</p>
<p>&emsp;&emsp;再次使用”-l”选项，直接列出crontab内容，上面的注释为系统自动生成，只有最后一句是我手工添加的。需要注意的是，不同系统，crontab命令打开的crontab文件内容不一定相同，有的可能没有注释，有的第一次使用可能不需要选择编辑器就直接进入crontab文件编辑界面了。（当然选择哪个编辑器也可以我们人工配置，这里不是我们要讲的知识点）</p>
<div align="center">	<img src="/Linux%E8%AE%A1%E5%88%92%E4%BB%BB%E5%8A%A1-1/8.jpg" class=""></div>

<p>&emsp;&emsp;查看&#x2F;var&#x2F;spool&#x2F;cron&#x2F;crontabs目录，发现存在一个名为kali的crontab文件。</p>
<div align="center">	<img src="/Linux%E8%AE%A1%E5%88%92%E4%BB%BB%E5%8A%A1-1/9.jpg" class=""></div>

<p>&emsp;&emsp;使用”-r”选项删除用户的crontab，注意该选项直接删除crontab文件，而不是删除其中的某条。因此删除之后，名为kali的crontab文件将从目录中删除。</p>
<div align="center">	<img src="/Linux%E8%AE%A1%E5%88%92%E4%BB%BB%E5%8A%A1-1/10.jpg" class=""></div>



<h1 id="04-总结"><a href="#04-总结" class="headerlink" title="04 总结"></a>04 总结</h1><p>&emsp;&emsp;计划任务的配置文件和目录涉及较多，以前没接触过的校友一时半会儿可能无法很好的吸收，大家可以带着以下几个问题去理解记忆。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">问题1：任务调度分哪两种？</span><br><span class="line">答：系统任务调度、用户任务调度</span><br><span class="line"></span><br><span class="line">问题2：不同计划任务的配置文件分别是？</span><br><span class="line">答：系统/etc/crontab、用户/var/spool/cron/*</span><br><span class="line"></span><br><span class="line">问题3：还涉及到哪些文件和目录？</span><br><span class="line">答：</span><br><span class="line">/etc/cron.d/*</span><br><span class="line">/etc/cron.hourly/*</span><br><span class="line">/etc/cron.daily/*</span><br><span class="line">/etc/cron.weekly/*</span><br><span class="line">/etc/cron.monthly/*</span><br><span class="line"></span><br><span class="line">问题4：问题3中各目录的区别？</span><br><span class="line">答:/etc/cron.d/存放crontab文件，其他目录存放需周期性运行的可执行脚本</span><br><span class="line"></span><br><span class="line">问题5：计划任务的黑白名单是哪两个文件？</span><br><span class="line">答：/etc/cron.deny、/etc/cron.allow</span><br><span class="line">计划任务的知识如果要深讲，还有很多可以讲的。不过大家掌握以上五个问题+语法+crontab命令，就足够了。如果感兴趣，大家可以去查阅官方的手册进行知识的补充。</span><br></pre></td></tr></table></figure>


<h1 id="05-免责声明"><a href="#05-免责声明" class="headerlink" title="05 免责声明"></a>05 免责声明</h1><p>&emsp;&emsp;安全小白团是帮助用户了解信息安全技术、安全漏洞相关信息的微信公众号。安全小白团提供的程序(方法)可能带有攻击性，仅供安全研究与教学之用，用户将其信息做其他用途，由用户承担全部法律及连带责任，安全小白团不承担任何法律及连带责任。</p>
<div align="center">	<img src="/Linux%E8%AE%A1%E5%88%92%E4%BB%BB%E5%8A%A1-1/11.gif" class=""></div></article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta"><i class="fas fa-circle-user fa-fw"></i>文章作者: </span><span class="post-copyright-info"><a href="https://aqxbt.github.io">安全小白团</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta"><i class="fas fa-square-arrow-up-right fa-fw"></i>文章链接: </span><span class="post-copyright-info"><a href="https://aqxbt.github.io/Linux%E8%AE%A1%E5%88%92%E4%BB%BB%E5%8A%A1-1/">https://aqxbt.github.io/Linux%E8%AE%A1%E5%88%92%E4%BB%BB%E5%8A%A1-1/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta"><i class="fas fa-circle-exclamation fa-fw"></i>版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来源 <a href="https://aqxbt.github.io" target="_blank">安全小白团</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/%E8%AE%A1%E5%88%92%E4%BB%BB%E5%8A%A1/">计划任务</a></div><div class="post-share"><div class="social-share" data-image="/img/default_cover.jpg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><a class="pagination-related" href="/hello-world/" title="Hello World"><img class="cover" src="/img/default_cover.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="info"><div class="info-1"><div class="info-item-1">上一篇</div><div class="info-item-2">Hello World</div></div><div class="info-2"><div class="info-item-1">Welcome to Hexo! This is your very first post. Check documentation for more info. If you get any problems when using Hexo, you can find the answer in troubleshooting or you can ask me on GitHub. Quick StartCreate a new post1$ hexo new &quot;My New Post&quot;  More info: Writing Run server1$ hexo server  More info: Server Generate static files1$ hexo generate  More info: Generating Deploy to remote sites1$ hexo deploy  More info: Deployment </div></div></div></a><a class="pagination-related" href="/%E6%9D%83%E9%99%90%E7%BB%B4%E6%8C%81-SSH%E8%BD%AF%E9%93%BE%E6%8E%A5%E5%90%8E%E9%97%A8/" title="权限维持-SSH软链接后门"><img class="cover" src="/img/default_cover.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="info text-right"><div class="info-1"><div class="info-item-1">下一篇</div><div class="info-item-2">权限维持-SSH软链接后门</div></div><div class="info-2"><div class="info-item-1">01 后门命令&emsp;&emsp;经典后门：对sshd建立软链接，即可使用任意密码登录。 123451、创建后门ln -sf /usr/sbin/sshd /路径名/su; /路径名/su -oPort=端口号2、任意密码登ssh 用户名@x.x.x.x -p 端口号       02 原理&emsp;&emsp;在sshd服务配置启用PAM认证的前提下，PAM配置文件中控制标志为sufficient时，只要pam_rootok模块检测uid为0（root）即可成功认证登录。 &emsp;&emsp;通俗点来说，一是sshd服务启用PAM认证机制，在&#x2F;etc&#x2F;ssh&#x2F;sshd_config文件中，设置UsePAM 为yes。如果不启用PAM，系统严格验证用户密码，不能建立后门。 &emsp;&emsp;二是在&#x2F;etc&#x2F;pam.d&#x2F;目录下，对应文件里包含”auth sufficient...</div></div></div></a></nav></div><div class="aside-content" id="aside-content"><div class="card-widget card-info text-center"><div class="avatar-img"><img src="/img/logo.png" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info-name">安全小白团</div><div class="author-info-description">关注微信公众号noobsec，安全小白团，博客https://aqxbt.github.io，分享自己的成长过程</div><div class="site-data"><a href="/archives/"><div class="headline">文章</div><div class="length-num">25</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">8</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">9</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/aqxbt"><i class="fab fa-github"></i><span>Follow Me</span></a></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>公告</span></div><div class="announcement_content"><div style="text-align: center;">
  <p>欢迎扫码关注微信公众号</p>
  <img src="/img/qrcode.png" alt="二维码" style="width: 100%; max-width: 200px;">
</div>
</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#01-%E4%BD%95%E4%B8%BA%E8%AE%A1%E5%88%92%E4%BB%BB%E5%8A%A1"><span class="toc-number">1.</span> <span class="toc-text">01 何为计划任务</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#02-crond%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6"><span class="toc-number">2.</span> <span class="toc-text">02 crond配置文件</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%B3%BB%E7%BB%9F%E4%BB%BB%E5%8A%A1%E8%B0%83%E5%BA%A6"><span class="toc-number">2.1.</span> <span class="toc-text">系统任务调度</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%94%A8%E6%88%B7%E4%BB%BB%E5%8A%A1%E8%B0%83%E5%BA%A6"><span class="toc-number">2.2.</span> <span class="toc-text">用户任务调度</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%85%B6%E4%BB%96%E6%96%87%E4%BB%B6"><span class="toc-number">2.3.</span> <span class="toc-text">其他文件</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#03-crontab%E5%91%BD%E4%BB%A4%E4%BD%BF%E7%94%A8"><span class="toc-number">3.</span> <span class="toc-text">03 crontab命令使用</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#04-%E6%80%BB%E7%BB%93"><span class="toc-number">4.</span> <span class="toc-text">04 总结</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#05-%E5%85%8D%E8%B4%A3%E5%A3%B0%E6%98%8E"><span class="toc-number">5.</span> <span class="toc-text">05 免责声明</span></a></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/hello-world/" title="Hello World"><img src="/img/default_cover.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Hello World"/></a><div class="content"><a class="title" href="/hello-world/" title="Hello World">Hello World</a><time datetime="2025-02-17T05:13:32.904Z" title="发表于 2025-02-17 13:13:32">2025-02-17</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/Linux%E8%AE%A1%E5%88%92%E4%BB%BB%E5%8A%A1-1/" title="Linux计划任务（1）"><img src="/img/default_cover.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Linux计划任务（1）"/></a><div class="content"><a class="title" href="/Linux%E8%AE%A1%E5%88%92%E4%BB%BB%E5%8A%A1-1/" title="Linux计划任务（1）">Linux计划任务（1）</a><time datetime="2020-08-21T01:17:10.000Z" title="发表于 2020-08-21 09:17:10">2020-08-21</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/%E6%9D%83%E9%99%90%E7%BB%B4%E6%8C%81-SSH%E8%BD%AF%E9%93%BE%E6%8E%A5%E5%90%8E%E9%97%A8/" title="权限维持-SSH软链接后门"><img src="/img/default_cover.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="权限维持-SSH软链接后门"/></a><div class="content"><a class="title" href="/%E6%9D%83%E9%99%90%E7%BB%B4%E6%8C%81-SSH%E8%BD%AF%E9%93%BE%E6%8E%A5%E5%90%8E%E9%97%A8/" title="权限维持-SSH软链接后门">权限维持-SSH软链接后门</a><time datetime="2020-07-30T01:30:14.000Z" title="发表于 2020-07-30 09:30:14">2020-07-30</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86%E4%B9%8Bjs%E6%96%87%E4%BB%B6/" title="信息收集之js文件"><img src="/img/default_cover.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="信息收集之js文件"/></a><div class="content"><a class="title" href="/%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86%E4%B9%8Bjs%E6%96%87%E4%BB%B6/" title="信息收集之js文件">信息收集之js文件</a><time datetime="2020-07-08T03:14:32.000Z" title="发表于 2020-07-08 11:14:32">2020-07-08</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/XSS-%E7%AE%80%E4%BB%8B-1/" title="XSS-简介(1)"><img src="/img/default_cover.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="XSS-简介(1)"/></a><div class="content"><a class="title" href="/XSS-%E7%AE%80%E4%BB%8B-1/" title="XSS-简介(1)">XSS-简介(1)</a><time datetime="2020-07-08T03:05:45.000Z" title="发表于 2020-07-08 11:05:45">2020-07-08</time></div></div></div></div></div></div></main><footer id="footer" style="background-image: url(/img/default_cover.jpg);"><div id="footer-wrap"><div class="copyright">&copy;2018 - 2025 By 安全小白团</div><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo 7.3.0</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly 5.3.3</a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="translateLink" type="button" title="简繁转换">繁</button><button id="darkmode" type="button" title="日间和夜间模式切换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="回到顶部"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox/fancybox.umd.min.js"></script><div class="js-pjax"></div><script defer="defer" id="fluttering_ribbon" mobile="false" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/canvas-fluttering-ribbon.min.js"></script><script id="click-show-text" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/click-show-text.min.js" data-mobile="false" data-text="I,LOVE,YOU" data-fontsize="15px" data-random="false" async="async"></script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div></body></html>